import { getLanguage } from 'obsidian';

interface TranslationKeys {
    plan: string;
    openPlan: string;
    inProgress: string;
    inProgressTooltip: string;
    maxActiveTasksWarning: string;
    inProgressStartDate: string;
    inProgressDueDate: string;
    inProgressOverdue: string;
    planned: string;
    plannedTooltip: string;
    unknownSection: string;
    noTasksForThisType: string;
    knowledgeBase: string;
    knowledgeBaseTooltip: string;
    knowledgeBaseName: string;
    knowledgeBaseType: string;
    knowledgeBaseSection: string;
    exportToJSON: string;
    exportToJSONTooltip: string;
    sources: string;
    sourcesTooltip: string;
    statistics: string;
    statisticsTooltip: string;
    history: string;
    historyTooltip: string;
    examples: string;
    examplesTooltip: string;
    // Settings
    settingsTitle: string;
    generalSettings: string;
    materialTypes: string;
    sectionsCategories: string;
    periodicTasks: string;
    folderPath: string;
    folderPathDesc: string;
    maxActiveTasks: string;
    maxActiveTasksDesc: string;
    statsStartDate: string;
    statsStartDateDesc: string;
    addNewType: string;
    newType: string;
    addNewSection: string;
    newSection: string;
    daily: string;
    weekly: string;
    monthly: string;
    quarterly: string;
    yearly: string;
    checklistItem: string;
    addItem: string;
    sectionName: string;
    typeName: string;
    dailyTask: string;
    weeklyTask: string;
    monthlyTask: string;
    quarterlyTask: string;
    yearlyTask: string;
    addTask: string;
    // Default settings
    book: string;
    bookTask1: string;
    bookTask2: string;
    article: string;
    articleTask1: string;
    articleTask2: string;
    video: string;
    videoTask1: string;
    videoTask2: string;
    podcast: string;
    podcastTask1: string;
    podcastTask2: string;
    course: string;
    courseTask1: string;
    courseTask2: string;
    section1: string;
    section2: string;
    section3: string;
    periodicTasksDaily1: string;
    periodicTasksDaily2: string;
    periodicTasksWeekly1: string;
    periodicTasksWeekly2: string;
    periodicTasksMonthly1: string;
    periodicTasksQuarterly1: string;
    periodicTasksYearly1: string;
}

const translations: Record<string, TranslationKeys> = {
    ru: {
        plan: '–ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è',
        openPlan: '–û—Ç–∫—Ä—ã—Ç—å –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è',
        inProgress: 'üõ†Ô∏è –í —Ä–∞–±–æ—Ç–µ',
        inProgressTooltip: '–¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏ –≤ —Ä–∞–±–æ—Ç–µ',
        maxActiveTasksWarning: '–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–¥–∞—á –≤ —Ä–∞–±–æ—Ç–µ, –≤–µ—Ä–Ω–∏—Ç–µ —á–∞—Å—Ç—å –∏–∑ –Ω–∏—Ö –≤ –û—á–µ—Ä–µ–¥—å',
        inProgressStartDate: '–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞',
        inProgressDueDate: '–ó–∞–≤–µ—Ä—à–∏—Ç—å –¥–æ',
        inProgressOverdue: ' (–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ!)',
        planned: '‚è≥ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ',
        plannedTooltip: '–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ, –Ω–æ –µ—â—ë –Ω–µ –Ω–∞—á–∞—Ç—ã–µ –∑–∞–¥–∞—á–∏',
        unknownSection: '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ä–∞–∑–¥–µ–ª',
        noTasksForThisType: '–ù–µ—Ç –∑–∞–¥–∞—á –¥–ª—è —ç—Ç–æ–≥–æ —Ç–∏–ø–∞',
        knowledgeBase: 'üìö –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π',
        knowledgeBaseTooltip: '–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –ø–æ–∫–∞ –Ω–µ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω',
        exportToJSON: '–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ JSON',
        exportToJSONTooltip: '–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –≤ JSON-—Ñ–∞–π–ª, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫ –ø–ª–∞–≥–∏–Ω—É',
        knowledgeBaseName: '–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ',
        knowledgeBaseType: '–¢–∏–ø',
        knowledgeBaseSection: '–†–∞–∑–¥–µ–ª',
        sources: 'üîç –ò—Å—Ç–æ—á–Ω–∏–∫',
        sourcesTooltip: '–†–µ—Å—É—Ä—Å—ã –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –ë–∞–∑—ã –∑–Ω–∞–Ω–∏–π',
        statistics: 'üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞',
        statisticsTooltip: '–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ –≤—Å–µ–º —Ä–∞–∑–¥–µ–ª–∞–º',
        history: 'üï∞Ô∏è –ò—Å—Ç–æ—Ä–∏—è',
        historyTooltip: '–ê—Ä—Ö–∏–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á',
        examples: 'üìÇ –ü—Ä–∏–º–µ—Ä—ã',
        examplesTooltip: '–®–∞–±–ª–æ–Ω—ã –ø–ª–∞–Ω–æ–≤ –æ—Ç —Å–æ–æ–±—â–µ—Å—Ç–≤–∞',
        settingsTitle: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã',
        generalSettings: '–û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
        materialTypes: '–¢–∏–ø—ã –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤',
        sectionsCategories: '–†–∞–∑–¥–µ–ª—ã –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏',
        periodicTasks: '–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏',
        folderPath: '–ü—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å –∑–∞–¥–∞—á–∞–º–∏',
        folderPathDesc: '–ü–∞–ø–∫–∞, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ñ–∞–π–ª—ã –∑–∞–¥–∞—á (–Ω–∞–ø—Ä–∏–º–µ—Ä, PersonalDevelopmentPlan)',
        maxActiveTasks: '–ú–∞–∫—Å–∏–º—É–º –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á',
        maxActiveTasksDesc: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á "–í —Ä–∞–±–æ—Ç–µ"',
        statsStartDate: '–ù–∞—á–∞–ª–æ –æ—Ç—Å—á—ë—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏',
        statsStartDateDesc: '–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö',
        addNewType: '+ –ù–æ–≤—ã–π —Ç–∏–ø',
        newType: '–ù–æ–≤—ã–π —Ç–∏–ø',
        addNewSection: '+ –ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª',
        newSection: '–ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª',
        daily: '–ï–∂–µ–¥–Ω–µ–≤–Ω–æ',
        weekly: '–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ',
        monthly: '–ï–∂–µ–º–µ—Å—è—á–Ω–æ',
        quarterly: '–ï–∂–µ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–æ',
        yearly: '–ï–∂–µ–≥–æ–¥–Ω–æ',
        checklistItem: '–ü—É–Ω–∫—Ç –ø–ª–∞–Ω–∞',
        addItem: '+ –ü—É–Ω–∫—Ç',
        sectionName: '–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞',
        typeName: '–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞',
        dailyTask: '–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞',
        weeklyTask: '–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞',
        monthlyTask: '–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –∑–∞–¥–∞—á–∞',
        quarterlyTask: '–ï–∂–µ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞',
        yearlyTask: '–ï–∂–µ–≥–æ–¥–Ω–∞—è –∑–∞–¥–∞—á–∞',
        addTask: '+ –ó–∞–¥–∞—á–∞',
        book: '–ö–Ω–∏–≥–∞',
        bookTask1: '–ü—Ä–æ—á–∏—Ç–∞—Ç—å –∫–Ω–∏–≥—É',
        bookTask2: '–ö–æ–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å',
        article: '–°—Ç–∞—Ç—å—è',
        articleTask1: '–ü—Ä–æ—á–∏—Ç–∞—Ç—å',
        articleTask2: '–í—ã–ø–∏—Å–∞—Ç—å —Ü–∏—Ç–∞—Ç—ã',
        video: '–í–∏–¥–µ–æ',
        videoTask1: '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å',
        videoTask2: '–ö–æ–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å',
        podcast: '–ü–æ–¥–∫–∞—Å—Ç',
        podcastTask1: '–ü—Ä–æ—Å–ª—É—à–∞—Ç—å',
        podcastTask2: '–ö–æ–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å',
        course: '–ö—É—Ä—Å',
        courseTask1: '–ü—Ä–æ–π—Ç–∏ —É—Ä–æ–∫',
        courseTask2: '–í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞–Ω–∏—è',
        section1: '–û–±—â–∏–µ',
        section2: '–û–±—É—á–µ–Ω–∏–µ',
        section3: '–†–∞–±–æ—Ç–∞',
        periodicTasksDaily1: '–£—Ç—Ä–µ–Ω–Ω–∏–π –æ–±–∑–æ—Ä –ø–æ—á—Ç—ã',
        periodicTasksDaily2: '–ü—Ä–æ—á–∏—Ç–∞—Ç—å –≥–ª–∞–≤—É –∏–∑ –∫–Ω–∏–≥–∏',
        periodicTasksWeekly1: '–†–µ—à–∏—Ç—å –∑–∞–¥–∞—á—É –Ω–∞ Project Euler',
        periodicTasksWeekly2: '–ü—Ä–æ—Å–ª—É—à–∞—Ç—å –ø–æ–¥–∫–∞—Å—Ç Culips',
        periodicTasksMonthly1: '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ —Å –¥–æ–∫–ª–∞–¥–∞ ScalaConf',
        periodicTasksQuarterly1: '–î–æ–±–∞–≤–∏—Ç—å –≤ –ë–∞–∑—É –∑–Ω–∞–Ω–∏–π –∫–Ω–∏–≥–∏, —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ ScalaConf',
        periodicTasksYearly1: '–ó–∞–∫–æ–Ω—á–∏—Ç—å –∫—É—Ä—Å –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è Scala',
    },
    en: {
        plan: 'Development Plan',
        openPlan: 'Open Development Plan',
        inProgress: 'üõ†Ô∏è In Progress',
        inProgressTooltip: 'Current tasks in progress',
        maxActiveTasksWarning: 'Too many tasks in progress, return some to Planned',
        inProgressStartDate: 'Start Date',
        inProgressDueDate: 'Due Date',
        inProgressOverdue: ' (Overdue!)',
        planned: '‚è≥ Planned',
        plannedTooltip: 'Planned, but not yet started tasks',
        unknownSection: 'Unknown Section',
        noTasksForThisType: 'No tasks for this type',
        knowledgeBase: 'üìö Knowledge Base',
        knowledgeBaseType: 'Type',
        knowledgeBaseTooltip: 'Materials for learning, which are not yet detailed',
        exportToJSON: 'Export to JSON',
        exportToJSONTooltip: 'Export the Knowledge Base to a JSON file to share with the community. More details in the plugin documentation',
        knowledgeBaseName: 'Name',
        knowledgeBaseSection: 'Section',
        sources: 'üîç Sources',
        sourcesTooltip: 'Resources for filling the Knowledge Base',
        statistics: 'üìä Statistics',
        statisticsTooltip: 'Progress analysis by sections',
        history: 'üï∞Ô∏è History',
        historyTooltip: 'Archive of completed tasks',
        examples: 'üìÇ Examples',
        examplesTooltip: 'Development plans from the community',
        settingsTitle: 'System Settings',
        generalSettings: 'General Settings',
        materialTypes: 'Material Types',
        sectionsCategories: 'Sections and Categories',
        periodicTasks: 'Periodic Tasks',
        folderPath: 'Folder Path',
        folderPathDesc: 'Folder where the task files are stored (e.g., PersonalDevelopmentPlan)',
        maxActiveTasks: 'Max Active Tasks',
        maxActiveTasksDesc: 'Maximum number of "In Progress" tasks',
        statsStartDate: 'Statistics Start Date',
        statsStartDateDesc: 'Data collection start date',
        addNewType: '+ New Type',
        newType: 'New Type',
        addNewSection: '+ New Section',
        newSection: 'New Section',
        daily: 'Daily',
        weekly: 'Weekly',
        monthly: 'Monthly',
        quarterly: 'Quarterly',
        yearly: 'Yearly',
        checklistItem: 'Checklist Item',
        addItem: '+ Item',
        sectionName: 'Section Name',
        typeName: 'Type Name',
        dailyTask: 'Daily Task',
        weeklyTask: 'Weekly Task',
        monthlyTask: 'Monthly Task',
        quarterlyTask: 'Quarterly Task',
        yearlyTask: 'Yearly Task',
        addTask: '+ Task',
        book: 'Book',
        bookTask1: 'Read book',
        bookTask2: 'Take notes',
        article: 'Article',
        articleTask1: 'Read',
        articleTask2: 'Extract quotes',
        video: 'Video',
        videoTask1: 'Watch',
        videoTask2: 'Take notes',
        podcast: 'Podcast',
        podcastTask1: 'Listen',
        podcastTask2: 'Take notes',
        course: 'Course',
        courseTask1: 'Complete lesson',
        courseTask2: 'Do assignments',
        section1: 'General',
        section2: 'Learning',
        section3: 'Work',
        periodicTasksDaily1: 'Morning email review',
        periodicTasksDaily2: 'Read a book chapter',
        periodicTasksWeekly1: 'Solve Project Euler problem',
        periodicTasksWeekly2: 'Listen to Culips podcast',
        periodicTasksMonthly1: 'Watch ScalaConf talk video',
        periodicTasksQuarterly1: 'Add ScalaConf recommended books to Knowledge Base',
        periodicTasksYearly1: 'Complete Advanced Scala course',
    }
};

const DEFAULT_LANGUAGE = 'en';

export function t(key: keyof TranslationKeys): string {
    try {
        const lang = getLanguage();
        return translations[lang]?.[key] ?? translations[DEFAULT_LANGUAGE][key];
    } catch {
        return translations[DEFAULT_LANGUAGE][key];
    }
}

const SETTINGS_KEYS: (keyof TranslationKeys)[] = [
    'settingsTitle', 'generalSettings', 'materialTypes', 'sectionsCategories',
    'periodicTasks', 'folderPath', 'folderPathDesc', 'maxActiveTasks', 'maxActiveTasksDesc', 'statsStartDate',
    'statsStartDateDesc', 'addNewType', 'newType', 'addNewSection', 'newSection',
    'daily', 'weekly', 'monthly', 'quarterly', 'yearly', 'checklistItem',
    'addItem', 'sectionName', 'typeName', 'dailyTask', 'weeklyTask',
    'monthlyTask', 'quarterlyTask', 'yearlyTask', 'addTask'
];

export function getLocalizedSettings() {
    return Object.fromEntries(
        SETTINGS_KEYS.map(key => [key, t(key)])
    ) as { [K in typeof SETTINGS_KEYS[number]]: string };
}
